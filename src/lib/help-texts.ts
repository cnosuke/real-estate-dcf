/**
 * 不動産投資DCF分析の入力項目ヘルプテキスト
 * 初心者向けに分かりやすく説明
 */
const INPUT_HELP_TEXTS = {
  // 物件基本情報
  p0: {
    title: '物件価格（本体）',
    description: '建物と土地の合計価格（諸費用は除く）',
    detail: `物件の購入価格です。不動産会社から提示される「物件価格」がこれに該当します。
    
【含まれるもの】
• 建物価格
• 土地価格
• 設備（エアコン、照明等が含まれる場合）

【含まれないもの】
• 仲介手数料
• 登記費用
• 融資手数料
• 火災保険料
• 固定資産税の日割り清算金

これらの諸費用は「初期諸費用」の項目で別途入力します。`,
    tips: '中古マンションの場合、物件価格の6-10%程度の諸費用がかかるのが一般的です。',
  },

  i0: {
    title: '初期諸費用',
    description: '物件購入時にかかる諸費用の合計',
    detail: `物件購入時に物件価格とは別にかかる費用の合計です。

【主な項目】
• 仲介手数料（物件価格×3%+6万円+消費税）
• 登記費用（所有権移転・抵当権設定）
• 融資手数料・保証料
• 火災保険料
• 固定資産税・都市計画税の日割り清算
• 印紙代
• 司法書士報酬

【目安】
• 中古マンション：物件価格の6-8%
• 新築マンション：物件価格の3-5%
• 一戸建て：物件価格の7-10%`,
    tips: '融資を利用する場合は、金融機関によって手数料が大きく異なります。事前に確認しましょう。',
  },

  rentMonthly0: {
    title: '初期月額家賃',
    description: '購入時点での想定月額賃料（管理費等込み）',
    detail: `物件を賃貸に出した場合の月額賃料収入です。

【含まれるもの】
• 基本賃料
• 管理費・共益費（入居者負担分）
• 駐車場代（ある場合）

【設定方法】
1. 周辺相場を調査（不動産サイト、管理会社に確認）
2. 物件の築年数、設備、立地を考慮
3. 現在の入居者がいる場合は現行賃料を参考
4. 空室の場合は募集想定賃料を設定

【注意点】
• 高めに設定しすぎると空室リスクが高まります
• 管理会社の意見も参考にしましょう`,
    tips: '賃料は「強気すぎず、弱気すぎず」が重要。周辺相場の±5%以内で設定するのが現実的です。',
  },

  monthlyOpex0: {
    title: '月額運営費',
    description: '物件運営にかかる月次費用（固定資産税は除く）',
    detail: `物件を所有・運営するために毎月かかる費用です。

【主な項目】
• 管理費（管理会社への支払い）
• 修繕積立金（大規模修繕に備えた積立）
• 建物管理費（共用部の清掃・点検等）
• PMフィー（管理会社手数料：賃料の3-8%程度）

【区分マンションの場合】
• 修繕積立金：月1-3万円程度（築年数が古いほど高い）
• 管理費：月5,000-15,000円程度
• PM手数料：賃料の5%程度

【一戸建ての場合】
• 修繕積立金は自己管理（月1-2万円程度を積立推奨）
• 管理費はなし
• PM手数料：賃料の3-5%程度`,
    tips: '修繕積立金が安すぎる物件は要注意。将来的に値上がりしたり、一時金の徴収がある可能性があります。',
  },

  vacancy: {
    title: '想定空室率',
    description: '年間を通じての予想空室率',
    detail: `1年間のうち、物件が空室になると想定される期間の割合です。

【設定の考え方】
• 0.05（5%）= 年間約18日の空室
• 0.1（10%）= 年間約36日の空室
• 0.15（15%）= 年間約55日の空室

【地域別の目安】
• 東京都心（山手線内）：3-8%
• 東京23区：5-12%
• 地方政令指定都市：8-15%
• 地方都市：12-20%以上

【物件タイプ別の目安】
• ワンルーム：やや高め（転居頻度が高い）
• ファミリータイプ：やや低め（居住期間が長い）
• 学生向け：季節性あり（3-4月は決まりやすい）

【影響要因】
• 立地（駅距離、周辺環境）
• 築年数・設備
• 家賃設定（相場より高いと空室期間が長くなる）`,
    tips: '保守的に見積もることが重要。楽観的すぎる設定は投資判断を誤る原因になります。',
  },

  inflation: {
    title: 'インフレ率（年率）',
    description: '物価上昇率の想定値',
    detail: `将来の物価上昇を想定した年率です。家賃や運営費に影響します。

【日本の実績】
• 過去20年平均：約0-1%
• 日銀目標：2%
• 近年の実績：0-2%程度

【影響する項目】
• 家賃：インフレ連動で上昇する傾向
• 運営費：物価上昇に連動
• 物件価格：長期的にはインフレ連動

【設定の考え方】
• 保守的：1-2%（過去実績ベース）
• 中立的：2%（日銀目標）
• 楽観的：2-3%

【注意点】
デフレ期間が長く続く可能性もあります。過度に楽観的な設定は避けましょう。`,
    tips: '日銀の物価目標2%を参考に、1-2%程度で設定するのが現実的です。',
  },

  rentDecay: {
    title: '家賃逓減率（年率）',
    description: '築年数経過による家賃下落率',
    detail: `建物の老朽化に伴う家賃の下落率です。

【一般的な傾向】
• 築0-10年：年0.5-1.5%程度の下落
• 築10-20年：年1-2%程度の下落
• 築20年以降：年1.5-3%程度の下落

【物件タイプ別】
• 区分マンション：0.5-2%（立地や管理状況による）
• 一戸建て：1-3%（メンテナンス頻度に依存）
• 商業物件：1-2%（テナントとの契約条件による）

【影響要因】
• 立地の将来性
• 建物・設備の耐久性
• 維持管理の質
• 周辺の新築物件との競争

【軽減方法】
• 定期的なリフォーム・設備更新
• 適切な維持管理
• 付加価値向上（ネット対応、宅配ボックス等）`,
    tips: 'インフレ率よりも家賃逓減率が高い場合、実質的な家賃は下落していきます。立地の将来性を重視しましょう。',
  },

  priceDecay: {
    title: '物件価値逓減率（年率）',
    description: '築年数経過による物件価格の下落率',
    detail: `建物の老朽化や立地環境の変化による物件価格の下落率です。

【一般的な傾向】
• 築0-10年：年0.3-1%程度
• 築10-20年：年0.5-1.5%程度
• 築20年以降：年0.5-2%程度

【価格下落の要因】
• 建物の物理的劣化
• 設備の陳腐化
• 周辺環境の変化
• 新築物件との競争

【下落抑制要因】
• 好立地（駅近、都心部）
• 適切な維持管理
• エリアの発展（再開発等）
• 希少性（限定的な供給）

【土地と建物の違い】
• 土地：基本的に価値は維持（立地による）
• 建物：経年により確実に減価

【注意点】
インフレ率との関係で実質的な価値変動を判断することが重要です。`,
    tips: '好立地の物件ほど価値の下落は緩やか。「立地、立地、立地」と言われる理由です。',
  },

  taxAnnualFixed: {
    title: '年間固定資産税',
    description: '固定資産税と都市計画税の合計年額',
    detail: `毎年1月1日時点の所有者に課税される税金です。

【税率】
• 固定資産税：1.4%（標準税率）
• 都市計画税：最高0.3%（市町村により異なる）

【課税標準】
• 土地：公示価格の約70%
• 建物：再建築価格の約50-70%

【住宅用地の特例】
• 200㎡以下の部分：課税標準額が1/6に減額
• 200㎡超の部分：課税標準額が1/3に減額

【新築住宅の特例】
• 一定期間（3-5年）は建物の税額が1/2に減額

【計算例（区分マンション）】
• 物件価格3,000万円の場合
• 年間15-25万円程度が目安

【確認方法】
• 売主から固定資産税通知書のコピーをもらう
• 市役所で固定資産評価証明書を取得`,
    tips: '購入後に大幅に上がることは基本的にありません。現在の金額をベースに設定しましょう。',
  },

  exitCostRate: {
    title: '売却コスト率',
    description: '物件売却時にかかる費用の割合',
    detail: `物件を売却する際にかかる費用の、売却価格に対する割合です。

【主な費用】
• 仲介手数料：売却価格×3%+6万円+消費税
• 譲渡所得税：利益に対して課税（短期39%、長期20%）
• 印紙代：1-3万円程度
• 登記費用：5-10万円程度
• 測量費用：30-80万円程度（土地境界確定が必要な場合）

【譲渡所得税】
• 短期譲渡（5年以下保有）：39%（所得税30%+住民税9%）
• 長期譲渡（5年超保有）：20%（所得税15%+住民税5%）
• マイホーム特例：3,000万円まで非課税（条件あり）

【コスト率の目安】
• 短期売却（5年以下）：5-8%（譲渡税は別途）
• 長期売却（5年超）：3-5%（譲渡税は別途）
• 利益が出ない場合：3-4%

【節税対策】
• 5年超保有で長期譲渡所得の適用
• 買い替え特例の活用
• 減価償却を活用した節税`,
    tips: '購入から5年以内の売却は譲渡税が高額になるため、長期保有を前提とした投資計画が重要です。',
  },

  years: {
    title: '保有年数',
    description: '物件を保有する想定期間',
    detail: `投資分析を行う期間です。この期間の最後に物件を売却すると仮定します。

【設定の考え方】
• 短期（3-5年）：キャピタルゲイン重視
• 中期（5-10年）：インカムゲイン中心、出口も考慮
• 長期（10年以上）：インカムゲイン重視

【期間別の特徴】
• 3-5年：市場変動の影響大、譲渡税負担重い
• 5-10年：バランス型、最も一般的
• 10年以上：長期安定運用、相続対策にも有効

【注意点】
• 短期ほど売却価格の影響が大きい
• 長期ほど運営収益の影響が大きい
• 融資期間との関係も考慮が必要

【融資との関係】
• 融資期間 ≥ 保有期間：売却時残債あり
• 融資期間 < 保有期間：完済後の運営`,
    tips: '初心者は10年程度で設定し、長期的な収益性を重視することをお勧めします。',
  },

  discountAsset: {
    title: '資産割引率（アンレバレッジ）',
    description: '借入を考慮しない物件自体の期待収益率',
    detail: `物件自体（借入なしの場合）に要求する年間収益率です。

【設定の考え方】
• リスクフリーレート（国債利回り）+ リスクプレミアム
• 現在の国債利回り：約0.5-1%
• 不動産リスクプレミアム：3-8%

【物件タイプ別の目安】
• 都心優良物件：4-6%
• 郊外住宅：6-8%
• 地方物件：8-12%以上
• 商業物件：5-10%

【リスク要因】
• 立地リスク
• 築年数・建物状況
• 市場流動性
• テナントリスク

【他の投資との比較】
• 預金金利：0.001-0.01%
• 国債：0.5-1%
• 株式：5-7%（長期期待リターン）
• REIT：3-5%

【設定のコツ】
保守的に設定することで、より確実な投資判断ができます。`,
    tips: '「この利回りを下回るなら他の投資にする」という基準で設定しましょう。',
  },

  discountEquity: {
    title: 'エクイティ割引率（自己資本）',
    description: '自己資本に対する期待収益率',
    detail: `借入を活用した場合の自己資本部分に要求する年間収益率です。

【資産割引率との関係】
通常は資産割引率より高く設定します（レバレッジリスクを反映）。

【設定の目安】
• 資産割引率 + 2-5%程度
• 例：資産6% → エクイティ8-11%

【考慮要素】
• 金利リスク（金利上昇時の返済負担増）
• レバレッジリスク（借入による財務リスク）
• 流動性リスク（売却時の制約）
• 個人の投資方針

【LTVとの関係】
• 高LTV（借入比率大）→ 高いエクイティ割引率
• 低LTV（自己資金多）→ 低いエクイティ割引率

【実際の設定例】
• 保守的：8-10%
• 標準的：10-12%
• 積極的：12-15%

【注意点】
あまり高く設定しすぎると、ほとんどの物件が投資対象から外れてしまいます。`,
    tips: '自分が許容できるリスクに応じて設定しましょう。初心者は高めに設定することをお勧めします。',
  },

  loanAmount: {
    title: '借入額',
    description: '金融機関から借り入れる金額',
    detail: `物件購入のために金融機関から借り入れる金額です。

【借入比率（LTV）の目安】
• 年収の10-15倍程度（上限）
• 物件価格の70-90%程度
• 諸費用分は自己資金が一般的

【金融機関別の特徴】
• 都市銀行：金利低め、審査厳しめ
• 地方銀行：地域密着、条件は地域による
• 信用金庫：個別対応、関係性重視
• ノンバンク：審査緩め、金利高め

【審査のポイント】
• 年収（安定性も重要）
• 勤続年数（3年以上が目安）
• 自己資金比率
• 他の借入状況
• 物件の担保価値

【借入のメリット】
• レバレッジ効果（少ない自己資金で大きな投資）
• 税務メリット（利息の損金算入）
• インフレヘッジ（実質的な借入負担軽減）

【借入のリスク】
• 金利上昇リスク
• 返済負担による財務圧迫
• 売却時の制約（残債 > 売却価格の場合）`,
    tips: '無理のない返済計画が最重要。空室や金利上昇があっても返済できる範囲で借りましょう。',
  },

  loanRate: {
    title: '借入金利（年率）',
    description: '金融機関からの借入利率',
    detail: `金融機関に支払う年間の利息率です。

【現在の市場金利（2024年）】
• 変動金利：0.5-2.5%程度
• 固定金利（10年）：1.0-3.0%程度
• フラット35：1.5-2.0%程度

【金利タイプ】
• 変動金利：低金利だが金利上昇リスクあり
• 固定金利：金利は高めだが安定性あり
• 当初固定：一定期間固定後、変動に移行

【金利に影響する要因】
• 個人の信用力（年収、勤続年数等）
• 物件の担保価値
• 借入比率（LTV）
• 金融機関との取引関係

【金利優遇の条件】
• 給与振込口座の指定
• 各種保険の契約
• クレジットカードの作成
• 投資信託等の購入

【金利上昇リスク】
• 変動金利の場合、将来的な金利上昇リスクを考慮
• 金利1%上昇時のシミュレーションも重要

【対策】
• 繰上返済による元本削減
• 借り換えによる金利軽減
• 固定金利への変更`,
    tips: '現在は低金利ですが、将来の金利上昇も想定してシミュレーションしましょう。',
  },

  loanTerm: {
    title: '返済期間',
    description: '借入金を完済するまでの期間',
    detail: `金融機関から借り入れたお金を完済するまでの年数です。

【設定可能期間】
• 一般的：20-35年
• 最長：35年（金融機関により異なる）
• 最短：5年程度

【期間の決め方】
• 建物の法定耐用年数以内が原則
• RC造：47年、鉄骨造：34年、木造：22年
• 築年数分は耐用年数から控除される場合が多い

【期間と月返済額の関係】
• 期間長い → 月返済額少、総利息多
• 期間短い → 月返済額多、総利息少

【保有期間との関係】
• 返済期間 > 保有期間：売却時に残債あり
• 返済期間 = 保有期間：売却時に完済
• 返済期間 < 保有期間：途中で完済、以降は無借金運営

【キャッシュフローへの影響】
長期間 → 月返済額が減り、初期のキャッシュフローが改善

【出口戦略への影響】
残債がある状態での売却は、売却価格が残債を上回る必要あり`,
    tips: '初心者は長めに設定してキャッシュフローを安定させ、余裕があるときに繰上返済するのがお勧めです。',
  },

  prepayPenaltyRate: {
    title: '繰上償還ペナルティ率',
    description: '早期返済時に課される手数料の割合',
    detail: `ローンを予定より早く返済（繰上返済）する際に、金融機関に支払う手数料の残債に対する割合です。

【一般的な設定】
• 多くの住宅ローン：0%（ペナルティなし）
• 事業性ローン：0-3%程度
• ノンバンク：1-5%程度

【ペナルティが設定される理由】
• 金融機関の利息収入機会の逸失
• 契約条件による拘束

【計算例】
• 残債2,000万円、ペナルティ率2%の場合
• ペナルティ額：2,000万円 × 2% = 40万円

【影響するケース】
• 物件売却時の一括返済
• 借り換え時の一括返済
• 余剰資金による繰上返済

【回避方法】
• ペナルティのない金融機関を選択
• ペナルティ期間経過後の返済
• ペナルティを考慮した投資判断

【設定のコツ】
契約書でペナルティ条件を確認し、正確な率を入力しましょう。`,
    tips: '住宅ローンは通常0%ですが、事業性ローンでは設定されることが多いので確認が必要です。',
  },
} as const

// カテゴリ別の概要説明
const SECTION_HELP_TEXTS = {
  propertyBasic: {
    title: '物件基本情報',
    description: '物件の購入価格や基本的な収益・費用を設定します。',
    detail: `不動産投資の基礎となる数値を入力する最も重要なセクションです。

【入力のポイント】
• 実際の市場価格を正確に反映させる
• 楽観的すぎない現実的な数値設定
• 周辺相場との比較検討

【注意事項】
• 家賃は相場より高く設定しすぎないこと
• 運営費は見落としがちな項目がないか確認
• 固定資産税は実額を確認すること`,
  },

  marketRisk: {
    title: '市場リスク・将来予測',
    description: '将来の市場変動や物件の経年変化を想定します。',
    detail: `不動産投資は長期投資です。将来の変動要因を適切に見込むことが重要です。

【考慮すべき要因】
• 経済情勢の変化（インフレ・デフレ）
• 建物の老朽化による価値下落
• 周辺環境の変化
• 人口動態の変化

【保守的な設定の重要性】
楽観的すぎる予測は投資判断を誤る原因となります。過去のデータを参考に、保守的な数値を設定しましょう。`,
  },

  loan: {
    title: '融資条件',
    description: '金融機関からの借入条件を設定します。',
    detail: `レバレッジ効果を活用した不動産投資では、融資条件が投資成果に大きく影響します。

【重要なポイント】
• 返済可能性を最優先に考える
• 金利上昇リスクを考慮する
• 空室時でも返済できる安全性を確保

【融資の基本原則】
「借りられるから借りる」ではなく「返せるから借りる」の考え方が重要です。`,
  },

  holdingSale: {
    title: '保有・売却設定',
    description: '投資期間と売却時の条件を設定します。',
    detail: `投資の出口戦略を明確にすることで、より精密な投資判断が可能になります。

【期間設定のコツ】
• 短期：市場変動の影響大、譲渡税負担重
• 長期：安定運営重視、相続対策も可能

【売却コストの重要性】
売却時のコストは想像以上に高額になることがあります。特に短期売却時の譲渡所得税は重要な検討要素です。`,
  },

  advanced: {
    title: '詳細設定',
    description: 'より詳細な分析のための追加設定です。',
    detail: `基本設定で十分な分析は可能ですが、より精密な分析を行いたい場合に使用します。

【上級者向け設定】
• 割引率の詳細設定
• リスクプレミアムの調整
• シナリオ分析用のパラメータ

【初心者の方へ】
まずは基本設定での分析に慣れてから、詳細設定を活用することをお勧めします。`,
  },
} as const

// ヘルプテキストのキー一覧を型として定義
export type InputHelpTextKey = keyof typeof INPUT_HELP_TEXTS
type SectionHelpTextKey = keyof typeof SECTION_HELP_TEXTS

// ヘルプテキストの取得ヘルパー関数
export function getInputHelpText(key: InputHelpTextKey) {
  const helpInfo = INPUT_HELP_TEXTS[key]
  if (!helpInfo) {
    return null
  }

  return {
    title: helpInfo.title,
    content: `${helpInfo.description}\n\n${helpInfo.detail}\n\n💡 ${helpInfo.tips}`,
  }
}

export function getSectionHelpText(key: SectionHelpTextKey) {
  return SECTION_HELP_TEXTS[key]
}
